# TODO â€” BACKEND ONLY (GO) â€” INSIGHTAI

VersÃ£o: 1.0  
Ãšltima atualizaÃ§Ã£o: 2026-02-06  
ResponsÃ¡vel: InsightAI Backend Core (Go)

Este arquivo define **EXCLUSIVAMENTE** o TODO do **BACKEND em Go** do InsightAI.  
Nada aqui envolve frontend, design, conteÃºdo ou marketing.

---

## ğŸ§­ REGRAS FUNDAMENTAIS (GO BACKEND)

- Backend Ã© a **autoridade final**
- Nada confia no frontend
- Toda request Ã© validada
- Toda aÃ§Ã£o Ã© auditada
- Toda lÃ³gica Ã© explÃ­cita
- Falhar seguro Ã© obrigatÃ³rio

---

# ğŸŸ¢ FASE 1 â€” BASE DO PROJETO EM GO

## Setup Inicial
- [ ] Criar mÃ³dulo Go (`go mod init insightai`)
- [ ] Definir versÃ£o mÃ­nima do Go (>= 1.22)
- [ ] Estrutura inicial de pastas
- [ ] Configurar `.env` + loader
- [ ] Configurar logger estruturado (JSON)
- [ ] Configurar graceful shutdown
- [ ] Criar health check (`/health`)

---

# ğŸŸ¡ FASE 2 â€” ESTRUTURA DE PASTAS (GO)

## Estrutura obrigatÃ³ria
/cmd
â””â”€ api/
â””â”€ main.go

/internal
â”œâ”€ config
â”œâ”€ server
â”œâ”€ middleware
â”œâ”€ auth
â”œâ”€ rbac
â”œâ”€ tenant
â”œâ”€ audit
â”œâ”€ domain
â”œâ”€ engine
â”œâ”€ agents
â”œâ”€ workflows
â”œâ”€ actions
â”œâ”€ integrations
â”œâ”€ observability
â””â”€ errors

/pkg
â””â”€ types


### Regras
- [ ] `cmd` apenas inicia a aplicaÃ§Ã£o
- [ ] Toda lÃ³gica fica em `/internal`
- [ ] Nada fora do mÃ³dulo acessa `/internal`
- [ ] Nenhuma pasta genÃ©rica (`utils`, `helpers`)

---

# ğŸŸ  FASE 3 â€” HTTP SERVER & MIDDLEWARE

## Server
- [ ] Criar HTTP server padrÃ£o
- [ ] Configurar timeouts
- [ ] Configurar CORS (restritivo)
- [ ] Versionamento de API (`/v1`)

## Middleware ObrigatÃ³rio
- [ ] Request ID
- [ ] Logger
- [ ] Recover (panic-safe)
- [ ] Auth middleware
- [ ] Tenant resolver
- [ ] RBAC enforcement
- [ ] Rate limit por tenant

---

# ğŸ”µ FASE 4 â€” AUTENTICAÃ‡ÃƒO (BACKEND)

## Auth
- [ ] Estrutura de usuÃ¡rio
- [ ] Tokens de acesso (curta duraÃ§Ã£o)
- [ ] Refresh tokens
- [ ] MFA (interface pronta)
- [ ] Bloqueio por tentativas falhas

## Admin
- [ ] Flag `platform_admin`
- [ ] SessÃ£o curta
- [ ] PreparaÃ§Ã£o para FIDO2 (WebAuthn)

---

# ğŸŸ£ FASE 5 â€” MULTI-TENANCY

## Tenant
- [ ] Resolver tenant por request
- [ ] Validar tenant ativo
- [ ] Isolamento obrigatÃ³rio em queries
- [ ] Nenhuma cache compartilhada

## Regras
- [ ] Toda funÃ§Ã£o recebe `tenantID`
- [ ] Nenhuma query sem tenant explÃ­cito

---

# ğŸ”´ FASE 6 â€” RBAC (AUTORIZAÃ‡ÃƒO)

## RBAC Core
- [ ] Modelo de permissÃµes
- [ ] UsuÃ¡rio â†’ PapÃ©is
- [ ] Agente â†’ PermissÃµes
- [ ] AÃ§Ã£o â†’ Escopo
- [ ] Documento â†’ NÃ­vel de acesso

## Enforcement
- [ ] FunÃ§Ã£o Ãºnica `Authorize(ctx)`
- [ ] Negar por padrÃ£o
- [ ] Logar toda negaÃ§Ã£o

---

# ğŸ§  FASE 7 â€” INSIGHTAI ENGINE (GO)

## Engine Core
- [ ] Estrutura de pipeline
- [ ] Policy validation
- [ ] Agent router
- [ ] Action dispatcher
- [ ] Response builder

## RAG (estrutura)
- [ ] Interface de busca vetorial
- [ ] Filtros por tenant
- [ ] Score de groundedness
- [ ] Fallback explÃ­cito

---

# ğŸ¤– FASE 8 â€” AGENTES (GO)

## Agentes Base
- [ ] Interface `Agent`
- [ ] Agente JurÃ­dico
- [ ] Agente Financeiro
- [ ] Agente TÃ©cnico
- [ ] Agente Supervisor

## Regras
- [ ] Prompt versionado
- [ ] Escopo fixo
- [ ] PermissÃµes prÃ³prias
- [ ] Nenhum agente executa fora do escopo

---

# ğŸ”„ FASE 9 â€” WORKFLOWS

## Workflow Engine
- [ ] DefiniÃ§Ã£o de workflow
- [ ] ExecuÃ§Ã£o por etapas
- [ ] Pausa / retomada
- [ ] Falha controlada
- [ ] Rollback (quando aplicÃ¡vel)

## Auditoria
- [ ] Log por etapa
- [ ] Status persistido

---

# âš™ï¸ FASE 10 â€” AÃ‡Ã•ES (EXECUÃ‡ÃƒO)

## Actions
- [ ] Registry de aÃ§Ãµes
- [ ] Schema de input
- [ ] ValidaÃ§Ã£o forte
- [ ] ConfirmaÃ§Ã£o obrigatÃ³ria
- [ ] Executor isolado

---

# ğŸ“Š FASE 11 â€” OBSERVABILIDADE

## Logs
- [ ] Logs estruturados
- [ ] Logs de auditoria
- [ ] Logs de erro

## MÃ©tricas
- [ ] LatÃªncia
- [ ] Erros
- [ ] Uso por tenant
- [ ] Custo estimado

---

# ğŸš¨ FASE 12 â€” AGENTE SUPERVISOR (KILL-SWITCH)

- [ ] AvaliaÃ§Ã£o de risco
- [ ] SuspensÃ£o de agentes
- [ ] Pausa de workflows
- [ ] Bloqueio de tenant
- [ ] Registro imutÃ¡vel

---

# ğŸ” FASE 13 â€” SEGURANÃ‡A AVANÃ‡ADA

- [ ] ProteÃ§Ã£o contra replay
- [ ] Rate limit avanÃ§ado
- [ ] Secrets management
- [ ] RotaÃ§Ã£o de chaves
- [ ] Testes de abuso

---

# ğŸ§ª FASE 14 â€” TESTES (GO)

## Testes ObrigatÃ³rios
- [ ] UnitÃ¡rios (domain)
- [ ] UnitÃ¡rios (rbac)
- [ ] UnitÃ¡rios (engine)
- [ ] IntegraÃ§Ã£o (API)
- [ ] Testes de carga bÃ¡sicos

---

# ğŸ“¦ FASE 15 â€” BUILD & DEPLOY

- [ ] Build reproducÃ­vel
- [ ] Dockerfile
- [ ] Config por ambiente
- [ ] Health probes
- [ ] Rollback simples

---

# ğŸ DEFINIÃ‡ÃƒO DE â€œPRONTOâ€ (BACKEND GO)

Um item sÃ³ Ã© considerado pronto quando:
- CÃ³digo idiomÃ¡tico Go
- Tipagem clara
- Erros tratados
- Logs emitidos
- Auditoria registrada
- Testes passando
- DocumentaÃ§Ã£o atualizada

---

## ğŸ“Œ OBSERVAÃ‡ÃƒO FINAL

O backend Go do InsightAI deve ser:
- DeterminÃ­stico
- Seguro
- AuditÃ¡vel
- EscalÃ¡vel
- FÃ¡cil de operar

Qualquer atalho aqui vira **risco legal, tÃ©cnico e financeiro**.

---

**InsightAI â€” Backend em Go feito para durar.**